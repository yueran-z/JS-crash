<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Permission API</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <header>
        <h1>Permission API</h1>
    </header>
    <main>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nobis est non suscipit modi consectetur impedit neque nesciunt, eum tempore facere pariatur aperiam molestias. Sapiente modi similique, maxime fuga cupiditate soluta.</p>
    </main>    
    <script>
        //HTML5 Permission API
        if(navigator.permissions){
            //browser supports this
        
            navigator.permissions.query({name:'geolocation'})
            .then(function(permissionStatus) {  
                console.log('geolocation permission state is ', permissionStatus.state);

                permissionStatus.onchange = function() {  
                  console.log('geolocation permission state has changed to ', this.state);
                };
            });

            //navigator.permissions.query({name:'push', userVisibleOnly:true})

            navigator.geolocation.getCurrentPosition(ftw, wtf);
            function ftw(){console.log('yes')}
            function wtf(){console.log('no')}

            Notification.requestPermission(function(result) {  
                if (result === 'denied') {  
                    console.log('Permission wasn\'t granted. Allow a retry.');  
                    return;  
                } else if (result === 'default') {  
                    console.log('The permission request was dismissed.');  
                    return;  
                }  
                console.log('Permission was granted for notifications');  
            });
        }
    </script>
</body>
</html>